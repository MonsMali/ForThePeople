---
import type { Lang } from '../i18n/languages';
import { useTranslations } from '../i18n/utils';

interface Props {
  claim: string;
  verdict: 'false' | 'misleading' | 'missing-context' | 'mixed' | 'true';
  verdictSummary: string;
  lang: Lang;
}

const { claim, verdict, verdictSummary, lang } = Astro.props;
const t = useTranslations(lang);

const verdictKey = `verdict.${verdict}` as const;
const verdictLabel = t(verdictKey as keyof ReturnType<typeof useTranslations> extends (key: infer K) => string ? K : never);

const colorMap: Record<string, string> = {
  false: 'bg-verdict-false',
  misleading: 'bg-verdict-misleading',
  'missing-context': 'bg-verdict-missing-context',
  mixed: 'bg-verdict-mixed',
  true: 'bg-verdict-true',
};

const borderColorMap: Record<string, string> = {
  false: 'border-verdict-false',
  misleading: 'border-verdict-misleading',
  'missing-context': 'border-verdict-missing-context',
  mixed: 'border-verdict-mixed',
  true: 'border-verdict-true',
};

const bgColor = colorMap[verdict] || 'bg-muted';
const borderColor = borderColorMap[verdict] || 'border-muted';
---

<div class={`border-l-4 ${borderColor} bg-paper-dark rounded-r-lg p-6 mb-8`}>
  <div class="mb-3">
    <span class="text-sm font-sans font-medium text-muted uppercase tracking-wide">
      {t('factpack.claim')}
    </span>
  </div>
  <blockquote class="text-xl font-serif italic text-ink mb-4 leading-relaxed">
    &ldquo;{claim}&rdquo;
  </blockquote>
  <div class="flex flex-wrap items-center gap-3 mb-3">
    <span
      class={`${bgColor} text-white font-sans font-bold text-sm uppercase tracking-wider px-4 py-1.5 rounded`}
      data-verdict={verdict}
    >
      {t(`verdict.${verdict}` as any)}
    </span>
  </div>
  <p class="font-sans text-base text-ink/80 leading-relaxed">
    {verdictSummary}
  </p>
</div>
