---
import type { Lang } from '../i18n/languages';
import { useTranslations } from '../i18n/utils';

interface Props {
  tag: string;
  lang: Lang;
  interactive?: boolean;
  linked?: boolean;
}

const { tag, lang, interactive = false, linked = false } = Astro.props;
const t = useTranslations(lang);
const tagKey = `tag.${tag}` as any;
const label = t(tagKey);

const tagColors: Record<string, string> = {
  portugal: 'border-emerald-300 bg-emerald-50 text-emerald-700',
  usa: 'border-blue-300 bg-blue-50 text-blue-700',
  immigration: 'border-amber-300 bg-amber-50 text-amber-700',
  corruption: 'border-red-300 bg-red-50 text-red-700',
  economy: 'border-violet-300 bg-violet-50 text-violet-700',
  justice: 'border-rose-300 bg-rose-50 text-rose-700',
  'public-safety': 'border-orange-300 bg-orange-50 text-orange-700',
  healthcare: 'border-cyan-300 bg-cyan-50 text-cyan-700',
  rhetoric: 'border-slate-300 bg-slate-50 text-slate-600',
  'broken-promises': 'border-pink-300 bg-pink-50 text-pink-700',
  education: 'border-indigo-300 bg-indigo-50 text-indigo-700',
  transport: 'border-sky-300 bg-sky-50 text-sky-700',
  'social-security': 'border-teal-300 bg-teal-50 text-teal-700',
  budget: 'border-lime-300 bg-lime-50 text-lime-700',
  ps: 'border-pink-300 bg-pink-50 text-pink-700',
  chega: 'border-slate-300 bg-slate-50 text-slate-600',
  eu: 'border-blue-300 bg-blue-50 text-blue-700',
  technology: 'border-purple-300 bg-purple-50 text-purple-700',
  privacy: 'border-gray-300 bg-gray-50 text-gray-700',
  politics: 'border-amber-300 bg-amber-50 text-amber-700',
  energy: 'border-yellow-300 bg-yellow-50 text-yellow-700',
  'us-politics': 'border-blue-300 bg-blue-50 text-blue-700',
  manufacturing: 'border-zinc-300 bg-zinc-50 text-zinc-700',
};

const colorClasses = tagColors[tag] || 'border-border bg-white text-muted';
const tagUrl = `/${lang}/tags/${tag}/`;
---

{interactive ? (
  <button
    data-tag={tag}
    class={`tag-filter inline-block px-3 py-1 rounded-full border font-sans text-xs font-medium transition-colors cursor-pointer data-[active]:bg-ink data-[active]:text-white data-[active]:border-ink hover:border-ink hover:text-ink ${colorClasses}`}
  >
    {label}
  </button>
) : linked ? (
  <a
    href={tagUrl}
    class={`inline-block px-3 py-1 rounded-full border font-sans text-xs font-medium no-underline hover:border-ink hover:text-ink transition-colors ${colorClasses}`}
  >
    {label}
  </a>
) : (
  <span class={`inline-block px-3 py-1 rounded-full border font-sans text-xs font-medium ${colorClasses}`}>
    {label}
  </span>
)}
